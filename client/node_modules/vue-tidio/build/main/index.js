"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const VueTidio = {
    install: function (app, options) {
        const defaultOptions = {
            delay: 0,
        };
        const tidioOptions = Object.assign({}, defaultOptions, options);
        if (!tidioOptions.appKey) {
            throw new Error('Please provide Tidio application public key (`appKey`)');
        }
        setTimeout(() => {
            const tidioScript = document.createElement('script');
            tidioScript.src = `//code.tidio.co/${options.appKey}.js`;
            document.body.appendChild(tidioScript);
        }, tidioOptions.delay);
        (() => {
            const onTidioChatApiReady = () => {
                app.config.globalProperties.$tidioChatApi = window.tidioChatApi;
            };
            if (window.tidioChatApi) {
                window.tidioChatApi.on('ready', onTidioChatApiReady);
            }
            else {
                document.addEventListener('tidioChat-ready', onTidioChatApiReady);
            }
        })();
    },
};
exports.default = VueTidio;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFVQSxNQUFNLFFBQVEsR0FBVztJQUN2QixPQUFPLEVBQUUsVUFBVSxHQUFHLEVBQUUsT0FBTztRQUM3QixNQUFNLGNBQWMsR0FBRztZQUNyQixLQUFLLEVBQUUsQ0FBQztTQUNULENBQUM7UUFFRixNQUFNLFlBQVksR0FHZCxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxjQUFjLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFFL0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUU7WUFDeEIsTUFBTSxJQUFJLEtBQUssQ0FBQyx3REFBd0QsQ0FBQyxDQUFDO1NBQzNFO1FBRUQsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNkLE1BQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFckQsV0FBVyxDQUFDLEdBQUcsR0FBRyxtQkFBbUIsT0FBTyxDQUFDLE1BQU0sS0FBSyxDQUFDO1lBQ3pELFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3pDLENBQUMsRUFBRSxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFdkIsQ0FBQyxHQUFHLEVBQUU7WUFDSixNQUFNLG1CQUFtQixHQUFHLEdBQUcsRUFBRTtnQkFDL0IsR0FBRyxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQztZQUNsRSxDQUFDLENBQUM7WUFFRixJQUFJLE1BQU0sQ0FBQyxZQUFZLEVBQUU7Z0JBQ3ZCLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO2FBQ3REO2lCQUFNO2dCQUNMLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxpQkFBaUIsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO2FBQ25FO1FBQ0gsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNQLENBQUM7Q0FDRixDQUFDO0FBRUYsa0JBQWUsUUFBUSxDQUFDIn0=
{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"/public/assets/css/materialize.css\";\nimport \"/public/assets/css/style.css\";\nimport \"/public/assets/js/materialize.js\";\nimport \"/public/assets/js/init.js\";\nimport store from \"../../vuex/store\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport { io } from \"socket.io-client\";\nexport default {\n  name: \"AppHeader\",\n  data() {\n    return {\n      search: \"\"\n    };\n  },\n  computed: {\n    user: function () {\n      return store.getters.getUser;\n    },\n    login: function () {\n      return store.getters.getLogin;\n    },\n    cartCounter: function () {\n      return store.getters.getCartCounter;\n    }\n  },\n  methods: {\n    doLogout: async function () {\n      const response = await axios.post(this.$apiURL + \"/logout\", null, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        // remove access token from local storage\n        localStorage.removeItem(this.$accessTokenKey);\n        this.$headers = {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer '\n        };\n        store.commit(\"setLogin\", false);\n        store.commit(\"setUser\", null);\n        this.$router.push(\"/login\");\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    getUser: async function () {\n      // check if user is logged in\n      if (localStorage.getItem(this.$accessTokenKey)) {\n        const response = await axios.post(this.$apiURL + \"/getUser\", null, {\n          headers: this.$headers\n        });\n        if (response.data.status == \"success\") {\n          // user is logged in\n          store.commit(\"setUser\", response.data.user);\n          global.socketIO.emit(\"connected\", response.data.user.email);\n          global.socketIO.on(\"newMessage\", function (message) {\n            store.commit(\"appendMessage\", message);\n            M.toast({\n              html: 'New message has been received.'\n            });\n          });\n          setTimeout(function () {\n            var elems = document.querySelectorAll('.dropdown-trigger');\n            var instances = M.Dropdown.init(elems, {});\n          }, 500);\n        } else {\n          // user is logged out\n          localStorage.removeItem(this.$accessTokenKey);\n        }\n        store.commit(\"setLogin\", localStorage.getItem(this.$accessTokenKey) != null);\n      }\n    },\n    doSearch: function () {\n      store.commit(\"setSearch\", this.search);\n    }\n  },\n  mounted: function () {\n    const cookieParts = document.cookie.split(\"; \");\n    for (let a = 0; a < cookieParts.length; a++) {\n      const keyValue = cookieParts[a].split(\"=\");\n      if (keyValue[0] == \"products\") {\n        const products = JSON.parse(keyValue[1]);\n        store.commit(\"setCartCounter\", products.length);\n      }\n    }\n    global.socketIO = io(this.$apiURL);\n    this.getUser();\n    var elems = document.querySelectorAll('.sidenav');\n    M.Sidenav.init(elems, {});\n  }\n};","map":{"version":3,"mappings":"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","names":["store","axios","swal","io","name","data","search","computed","user","getters","getUser","login","getLogin","cartCounter","getCartCounter","methods","doLogout","response","post","$apiURL","headers","$headers","status","localStorage","removeItem","$accessTokenKey","commit","$router","push","fire","message","getItem","global","socketIO","emit","email","on","M","toast","html","setTimeout","elems","document","querySelectorAll","instances","Dropdown","init","doSearch","mounted","cookieParts","cookie","split","a","length","keyValue","products","JSON","parse","Sidenav"],"sourceRoot":"","sources":["/home/aka/Documents/react-nativ/ecommerce-mevn-stack/client/src/components/layouts/AppHeader.vue"],"sourcesContent":["<template>\r\n  <nav class=\"light-blue\" role=\"navigation\">\r\n    <div class=\"nav-wrapper container\">\r\n\r\n      <router-link id=\"logo-container\" to=\"/\" class=\"brand-logo\">AKaMart</router-link>\r\n\r\n      <ul class=\"right hide-on-med-and-down\">\r\n        <li>\r\n          <form style=\"position: relative; top: 10px;\" v-on:submit.prevent=\"doSearch\">\r\n            <div class=\"input-field\">\r\n              <input id=\"search\" type=\"search\" v-model=\"search\" style=\"height: 50px;\" />\r\n              <label class=\"label-icon\" for=\"search\"><i class=\"material-icons\" style=\"line-height: 50px;\">search</i></label>\r\n              <i class=\"material-icons\" style=\"line-height: 50px;\">close</i>\r\n            </div>\r\n          </form>\r\n        </li>\r\n\r\n        <li class=\"nav-item\" v-if=\"!login\">\r\n          <router-link class=\"nav-link\" to=\"/login\">Gabung</router-link>\r\n        </li>\r\n\r\n        <li class=\"nav-item\" v-if=\"!login\">\r\n          <router-link class=\"nav-link\" to=\"/register\">Daftar</router-link>\r\n        </li>\r\n\r\n        <li v-if=\"user != null\">\r\n           <!-- Dropdown Trigger -->\r\n            <a class='dropdown-trigger' href='javascript:void(0)' data-target='dropdown-user' v-text=\"user.name\"></a>\r\n\r\n            <!-- Dropdown Structure -->\r\n            <ul id='dropdown-user' class='dropdown-content' style=\"width: 140px;\">\r\n              <li><a href=\"javascript:void(0)\" v-on:click=\"doLogout\">Logout</a></li>\r\n            </ul>\r\n        </li>\r\n\r\n        <li>\r\n          <router-link to=\"/cart\">Keranjang <span v-if=\"cartCounter > 0\" v-text=\"'(' + cartCounter + ')'\"></span></router-link>\r\n        </li>\r\n\r\n        <!-- <li>\r\n          <router-link to=\"/premium\">Premium version</router-link>\r\n        </li> -->\r\n      </ul>\r\n\r\n      <ul id=\"nav-mobile\" class=\"sidenav\">\r\n      </ul>\r\n      <a href=\"#\" data-target=\"nav-mobile\" class=\"sidenav-trigger\"><i class=\"material-icons\">menu</i></a>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\n\r\n  import \"/public/assets/css/materialize.css\"\r\n  import \"/public/assets/css/style.css\"\r\n\r\n  import \"/public/assets/js/materialize.js\"\r\n  import \"/public/assets/js/init.js\"\r\n\r\n  import store from \"../../vuex/store\"\r\n  import axios from \"axios\"\r\n  import swal from \"sweetalert2\"\r\n\r\n  import { io } from \"socket.io-client\"\r\n\r\n  export default {\r\n    name: \"AppHeader\",\r\n\r\n    data() {\r\n      return {\r\n        search: \"\"\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      user: function () {\r\n        return store.getters.getUser\r\n      },\r\n\r\n      login: function () {\r\n        return store.getters.getLogin\r\n      },\r\n\r\n      cartCounter: function() {\r\n        return store.getters.getCartCounter\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      doLogout: async function () {\r\n        const response = await axios.post(\r\n          this.$apiURL + \"/logout\",\r\n          null,\r\n          {\r\n            headers: this.$headers\r\n          }\r\n        )\r\n\r\n        if (response.data.status == \"success\") {\r\n          // remove access token from local storage\r\n          localStorage.removeItem(this.$accessTokenKey)\r\n\r\n          this.$headers = {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': 'Bearer '\r\n          }\r\n\r\n          store.commit(\"setLogin\", false)\r\n          store.commit(\"setUser\", null)\r\n\r\n          this.$router.push(\"/login\")\r\n        } else {\r\n          swal.fire(\"Error\", response.data.message, \"error\")\r\n        }\r\n      },\r\n\r\n      getUser: async function () {\r\n\r\n        // check if user is logged in\r\n        if (localStorage.getItem(this.$accessTokenKey)) {\r\n\r\n          const response = await axios.post(\r\n            this.$apiURL + \"/getUser\",\r\n            null,\r\n            {\r\n                headers: this.$headers\r\n            }\r\n          )\r\n\r\n          if (response.data.status == \"success\") {\r\n            // user is logged in\r\n            store.commit(\"setUser\", response.data.user)\r\n\r\n            global.socketIO.emit(\"connected\", response.data.user.email)\r\n\r\n            global.socketIO.on(\"newMessage\", function (message) {\r\n              store.commit(\"appendMessage\", message)\r\n              M.toast({html: 'New message has been received.'})\r\n            })\r\n\r\n            setTimeout(function () {\r\n              var elems = document.querySelectorAll('.dropdown-trigger')\r\n              var instances = M.Dropdown.init(elems, {})\r\n            }, 500)\r\n          } else {\r\n            // user is logged out\r\n            localStorage.removeItem(this.$accessTokenKey)\r\n          }\r\n\r\n          store.commit(\"setLogin\", (localStorage.getItem(this.$accessTokenKey) != null))\r\n        }\r\n      },\r\n\r\n      doSearch: function () {\r\n        store.commit(\"setSearch\", this.search)\r\n      }\r\n    },\r\n\r\n    mounted: function () {\r\n      const cookieParts = document.cookie.split(\"; \")\r\n      for (let a = 0; a < cookieParts.length; a++) {\r\n        const keyValue = cookieParts[a].split(\"=\")\r\n        if (keyValue[0] == \"products\") {\r\n          const products = JSON.parse(keyValue[1])\r\n          store.commit(\"setCartCounter\", products.length)\r\n        }\r\n      }\r\n\r\n      global.socketIO = io(this.$apiURL)\r\n      this.getUser()\r\n\r\n      var elems = document.querySelectorAll('.sidenav')\r\n      M.Sidenav.init(elems, {})\r\n    }\r\n  }\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
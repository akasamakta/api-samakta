{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"light-blue lighten-1\",\n  role: \"navigation\"\n};\nconst _hoisted_2 = {\n  class: \"nav-wrapper container\"\n};\nconst _hoisted_3 = {\n  class: \"right hide-on-med-and-down\"\n};\nconst _hoisted_4 = {\n  class: \"input-field\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"label-icon\",\n  for: \"search\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"material-icons\",\n  style: {\n    \"line-height\": \"50px\"\n  }\n}, \"search\")], -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"material-icons\",\n  style: {\n    \"line-height\": \"50px\"\n  }\n}, \"close\", -1 /* HOISTED */);\nconst _hoisted_7 = {\n  key: 0,\n  class: \"nav-item\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"nav-item\"\n};\nconst _hoisted_9 = {\n  key: 2\n};\nconst _hoisted_10 = [\"textContent\"];\nconst _hoisted_11 = {\n  id: \"dropdown-user\",\n  class: \"dropdown-content\",\n  style: {\n    \"width\": \"140px\"\n  }\n};\nconst _hoisted_12 = [\"textContent\"];\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"ul\", {\n  id: \"nav-mobile\",\n  class: \"sidenav\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"#\",\n  \"data-target\": \"nav-mobile\",\n  class: \"sidenav-trigger\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"material-icons\"\n}, \"menu\")], -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"nav\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_router_link, {\n    id: \"logo-container\",\n    to: \"/\",\n    class: \"brand-logo\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"AKaMart\")]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"ul\", _hoisted_3, [_createElementVNode(\"li\", null, [_createElementVNode(\"form\", {\n    style: {\n      \"position\": \"relative\",\n      \"top\": \"10px\"\n    },\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers((...args) => $options.doSearch && $options.doSearch(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    id: \"search\",\n    type: \"search\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.search = $event),\n    style: {\n      \"height\": \"50px\"\n    }\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.search]]), _hoisted_5, _hoisted_6])], 32 /* HYDRATE_EVENTS */)]), !$options.login ? (_openBlock(), _createElementBlock(\"li\", _hoisted_7, [_createVNode(_component_router_link, {\n    class: \"nav-link\",\n    to: \"/login\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Gabung\")]),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), !$options.login ? (_openBlock(), _createElementBlock(\"li\", _hoisted_8, [_createVNode(_component_router_link, {\n    class: \"nav-link\",\n    to: \"/register\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Daftar\")]),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true), $options.user != null ? (_openBlock(), _createElementBlock(\"li\", _hoisted_9, [_createCommentVNode(\" Dropdown Trigger \"), _createElementVNode(\"a\", {\n    class: \"dropdown-trigger\",\n    href: \"javascript:void(0)\",\n    \"data-target\": \"dropdown-user\",\n    textContent: _toDisplayString($options.user.name)\n  }, null, 8 /* PROPS */, _hoisted_10), _createCommentVNode(\" Dropdown Structure \"), _createElementVNode(\"ul\", _hoisted_11, [_createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.doLogout && $options.doLogout(...args))\n  }, \"Logout\")])])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"li\", null, [_createVNode(_component_router_link, {\n    to: \"/cart\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Keranjang \"), $options.cartCounter > 0 ? (_openBlock(), _createElementBlock(\"span\", {\n      key: 0,\n      textContent: _toDisplayString('(' + $options.cartCounter + ')')\n    }, null, 8 /* PROPS */, _hoisted_12)) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  })]), _createCommentVNode(\" <li>\\r\\n          <router-link to=\\\"/premium\\\">Premium version</router-link>\\r\\n        </li> \")]), _hoisted_13, _hoisted_14])]);\n}","map":{"version":3,"mappings":";;EACOA,KAAK,EAAC,sBAAsB;EAACC,IAAI,EAAC;;;EAChCD,KAAK,EAAC;AAAuB;;EAI5BA,KAAK,EAAC;AAA4B;;EAG3BA,KAAK,EAAC;AAAa;gCAEtBE,oBAA8G;EAAvGF,KAAK,EAAC,YAAY;EAACG,GAAG,EAAC;iBAASD,oBAA+D;EAA5DF,KAAK,EAAC,gBAAgB;EAACI,KAA0B,EAA1B;IAAA;EAAA;GAA2B,QAAM;gCAClGF,oBAA8D;EAA3DF,KAAK,EAAC,gBAAgB;EAACI,KAA0B,EAA1B;IAAA;EAAA;GAA2B,OAAK;;;EAK5DJ,KAAK,EAAC;;;;EAINA,KAAK,EAAC;;;;;;;EASFK,EAAE,EAAC,eAAe;EAACL,KAAK,EAAC,kBAAkB;EAACI,KAAqB,EAArB;IAAA;EAAA;;;iCActDF,oBACK;EADDG,EAAE,EAAC,YAAY;EAACL,KAAK,EAAC;;iCAE1BE,oBAAmG;EAAhGI,IAAI,EAAC,GAAG;EAAC,aAAW,EAAC,YAAY;EAACN,KAAK,EAAC;iBAAkBE,oBAAkC;EAA/BF,KAAK,EAAC;AAAgB,GAAC,MAAI;;;;uBA7C/FO,oBA+CM,OA/CNC,UA+CM,GA9CJN,oBA6CM,OA7CNO,UA6CM,GA3CJC,aAAgFC;IAAnEN,EAAE,EAAC,gBAAgB;IAACO,EAAE,EAAC,GAAG;IAACZ,KAAK,EAAC;;sBAAa,MAAO,kBAAP,SAAO;;MAElEE,oBAoCK,MApCLW,UAoCK,GAnCHX,oBAQK,aAPHA,oBAMO;IANDE,KAAsC,EAAtC;MAAA;MAAA;IAAA,CAAsC;IAAMU,QAAM,wDAAUC,+CAAQ;MACxEb,oBAIM,OAJNc,UAIM,mBAHJd,oBAA0E;IAAnEG,EAAE,EAAC,QAAQ;IAACY,IAAI,EAAC,QAAQ;+DAAUC,YAAM;IAAEd,KAAqB,EAArB;MAAA;IAAA;iDAARc,YAAM,KAChDC,UAA8G,EAC9GC,UAA8D,kCAKxCL,cAAK,kBAAjCR,oBAEK,MAFLc,UAEK,GADHX,aAA8DC;IAAjDX,KAAK,EAAC,UAAU;IAACY,EAAE,EAAC;;sBAAS,MAAM,kBAAN,QAAM;;8CAGtBG,cAAK,kBAAjCR,oBAEK,MAFLe,UAEK,GADHZ,aAAiEC;IAApDX,KAAK,EAAC,UAAU;IAACY,EAAE,EAAC;;sBAAY,MAAM,kBAAN,QAAM;;6CAG3CG,aAAI,0BAAdR,oBAQK,mBAPFgB,yCAAyB,EACxBrB,oBAAyG;IAAtGF,KAAK,EAAC,kBAAkB;IAACM,IAAI,EAAC,oBAAoB;IAAC,aAAW,EAAC,eAAe;iBAACkB,iBAAQT,QAAU,KAAN,CAACU,IAAI;wCAEnGF,2CAA2B,EAC3BrB,oBAEK,MAFLwB,WAEK,GADHxB,oBAAsE,aAAlEA,oBAA6D;IAA1DI,IAAI,EAAC,oBAAoB;IAAMqB,OAAK,yCAAEZ,+CAAQ;KAAE,QAAM,8CAInEb,oBAEK,aADHQ,aAAqHC;IAAxGC,EAAE,EAAC;EAAO;sBAAC,MAAU,kBAAV,YAAU,GAAYG,oBAAW,sBAAvBR,oBAAqE;;mBAAxCiB,iBAAgC,MAAlBT,oBAAW;;;QAG1FQ,sHAES,IAGXK,WACK,EACLC,WAAmG","names":["class","role","_createElementVNode","for","style","id","href","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_router_link","to","_hoisted_3","onSubmit","$options","_hoisted_4","type","$data","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_createCommentVNode","_toDisplayString","name","_hoisted_11","onClick","_hoisted_13","_hoisted_14"],"sourceRoot":"","sources":["/home/aka/Documents/react-nativ/ecommerce-mevn-stack/client/src/components/layouts/AppHeader.vue"],"sourcesContent":["<template>\r\n  <nav class=\"light-blue lighten-1\" role=\"navigation\">\r\n    <div class=\"nav-wrapper container\">\r\n\r\n      <router-link id=\"logo-container\" to=\"/\" class=\"brand-logo\">AKaMart</router-link>\r\n\r\n      <ul class=\"right hide-on-med-and-down\">\r\n        <li>\r\n          <form style=\"position: relative; top: 10px;\" v-on:submit.prevent=\"doSearch\">\r\n            <div class=\"input-field\">\r\n              <input id=\"search\" type=\"search\" v-model=\"search\" style=\"height: 50px;\" />\r\n              <label class=\"label-icon\" for=\"search\"><i class=\"material-icons\" style=\"line-height: 50px;\">search</i></label>\r\n              <i class=\"material-icons\" style=\"line-height: 50px;\">close</i>\r\n            </div>\r\n          </form>\r\n        </li>\r\n\r\n        <li class=\"nav-item\" v-if=\"!login\">\r\n          <router-link class=\"nav-link\" to=\"/login\">Gabung</router-link>\r\n        </li>\r\n\r\n        <li class=\"nav-item\" v-if=\"!login\">\r\n          <router-link class=\"nav-link\" to=\"/register\">Daftar</router-link>\r\n        </li>\r\n\r\n        <li v-if=\"user != null\">\r\n           <!-- Dropdown Trigger -->\r\n            <a class='dropdown-trigger' href='javascript:void(0)' data-target='dropdown-user' v-text=\"user.name\"></a>\r\n\r\n            <!-- Dropdown Structure -->\r\n            <ul id='dropdown-user' class='dropdown-content' style=\"width: 140px;\">\r\n              <li><a href=\"javascript:void(0)\" v-on:click=\"doLogout\">Logout</a></li>\r\n            </ul>\r\n        </li>\r\n\r\n        <li>\r\n          <router-link to=\"/cart\">Keranjang <span v-if=\"cartCounter > 0\" v-text=\"'(' + cartCounter + ')'\"></span></router-link>\r\n        </li>\r\n\r\n        <!-- <li>\r\n          <router-link to=\"/premium\">Premium version</router-link>\r\n        </li> -->\r\n      </ul>\r\n\r\n      <ul id=\"nav-mobile\" class=\"sidenav\">\r\n      </ul>\r\n      <a href=\"#\" data-target=\"nav-mobile\" class=\"sidenav-trigger\"><i class=\"material-icons\">menu</i></a>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\n\r\n  import \"/public/assets/css/materialize.css\"\r\n  import \"/public/assets/css/style.css\"\r\n\r\n  import \"/public/assets/js/materialize.js\"\r\n  import \"/public/assets/js/init.js\"\r\n\r\n  import store from \"../../vuex/store\"\r\n  import axios from \"axios\"\r\n  import swal from \"sweetalert2\"\r\n\r\n  import { io } from \"socket.io-client\"\r\n\r\n  export default {\r\n    name: \"AppHeader\",\r\n\r\n    data() {\r\n      return {\r\n        search: \"\"\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      user: function () {\r\n        return store.getters.getUser\r\n      },\r\n\r\n      login: function () {\r\n        return store.getters.getLogin\r\n      },\r\n\r\n      cartCounter: function() {\r\n        return store.getters.getCartCounter\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      doLogout: async function () {\r\n        const response = await axios.post(\r\n          this.$apiURL + \"/logout\",\r\n          null,\r\n          {\r\n            headers: this.$headers\r\n          }\r\n        )\r\n\r\n        if (response.data.status == \"success\") {\r\n          // remove access token from local storage\r\n          localStorage.removeItem(this.$accessTokenKey)\r\n\r\n          this.$headers = {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': 'Bearer '\r\n          }\r\n\r\n          store.commit(\"setLogin\", false)\r\n          store.commit(\"setUser\", null)\r\n\r\n          this.$router.push(\"/login\")\r\n        } else {\r\n          swal.fire(\"Error\", response.data.message, \"error\")\r\n        }\r\n      },\r\n\r\n      getUser: async function () {\r\n\r\n        // check if user is logged in\r\n        if (localStorage.getItem(this.$accessTokenKey)) {\r\n\r\n          const response = await axios.post(\r\n            this.$apiURL + \"/getUser\",\r\n            null,\r\n            {\r\n                headers: this.$headers\r\n            }\r\n          )\r\n\r\n          if (response.data.status == \"success\") {\r\n            // user is logged in\r\n            store.commit(\"setUser\", response.data.user)\r\n\r\n            global.socketIO.emit(\"connected\", response.data.user.email)\r\n\r\n            global.socketIO.on(\"newMessage\", function (message) {\r\n              store.commit(\"appendMessage\", message)\r\n              M.toast({html: 'New message has been received.'})\r\n            })\r\n\r\n            setTimeout(function () {\r\n              var elems = document.querySelectorAll('.dropdown-trigger')\r\n              var instances = M.Dropdown.init(elems, {})\r\n            }, 500)\r\n          } else {\r\n            // user is logged out\r\n            localStorage.removeItem(this.$accessTokenKey)\r\n          }\r\n\r\n          store.commit(\"setLogin\", (localStorage.getItem(this.$accessTokenKey) != null))\r\n        }\r\n      },\r\n\r\n      doSearch: function () {\r\n        store.commit(\"setSearch\", this.search)\r\n      }\r\n    },\r\n\r\n    mounted: function () {\r\n      const cookieParts = document.cookie.split(\"; \")\r\n      for (let a = 0; a < cookieParts.length; a++) {\r\n        const keyValue = cookieParts[a].split(\"=\")\r\n        if (keyValue[0] == \"products\") {\r\n          const products = JSON.parse(keyValue[1])\r\n          store.commit(\"setCartCounter\", products.length)\r\n        }\r\n      }\r\n\r\n      global.socketIO = io(this.$apiURL)\r\n      this.getUser()\r\n\r\n      var elems = document.querySelectorAll('.sidenav')\r\n      M.Sidenav.init(elems, {})\r\n    }\r\n  }\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport store from \"../vuex/store\";\nexport default {\n  data() {\n    return {\n      page: 1,\n      products: [],\n      sortBy: \"\",\n      categories: [],\n      category: \"\",\n      isLoading: false\n    };\n  },\n  computed: {\n    search: function () {\n      return store.getters.getSearch;\n    }\n  },\n  methods: {\n    onchangeSortBy: function () {\n      this.page = 1;\n      this.sortBy = event.target.value;\n      this.getData();\n    },\n    onclickCategory: function () {\n      this.page = 1;\n      this.category = event.target.innerHTML;\n      this.getData();\n    },\n    loadMore: function () {\n      this.$refs.btnLoadMore.setAttribute(\"disabled\", \"disabled\");\n      this.page++;\n      this.getData();\n    },\n    getConfigurations: async function () {\n      const response = await axios.post(this.$apiURL + \"/getConfigurations\", null);\n      if (response.data.status == \"success\") {\n        const configurations = response.data.configurations;\n        this.categories = configurations.categories || [];\n      }\n    },\n    getData: async function () {\n      this.isLoading = true;\n      const formData = new FormData();\n      formData.append(\"page\", this.page);\n      formData.append(\"sortBy\", this.sortBy);\n      formData.append(\"category\", this.category);\n      formData.append(\"search\", this.search);\n      const response = await axios.post(this.$apiURL + \"/products/fetch\", formData);\n      this.isLoading = false;\n      this.$refs.btnLoadMore.removeAttribute(\"disabled\");\n      if (response.data.status == \"success\") {\n        this.products = response.data.products;\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    }\n  },\n  mounted: function () {\n    this.getConfigurations();\n    this.getData();\n    var elems = document.querySelectorAll('select');\n    var instances = M.FormSelect.init(elems, {});\n  },\n  watch: {\n    search: function (to, from) {\n      this.getData();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","swal","store","data","page","products","sortBy","categories","category","isLoading","computed","search","getters","getSearch","methods","onchangeSortBy","event","target","value","getData","onclickCategory","innerHTML","loadMore","$refs","btnLoadMore","setAttribute","getConfigurations","response","post","$apiURL","status","configurations","formData","FormData","append","removeAttribute","fire","message","mounted","elems","document","querySelectorAll","instances","M","FormSelect","init","watch","to","from"],"sourceRoot":"","sources":["/home/aka/Documents/react-nativ/ecommerce-mevn-stack/client/src/components/HomeComponent.vue"],"sourcesContent":["<template>\r\n\t<div class=\"section no-pad-bot\" id=\"index-banner\">\r\n\t\t<div class=\"container-fluid\">\r\n\t\t\t<br><br>\r\n\t\t\t<h1 class=\"header center orange-text\">E-commerce website</h1>\r\n\t\t\t<div class=\"row center\">\r\n\t\t\t\t<h5 class=\"header col s12 light\">Your tagline here</h5>\r\n\t\t\t</div>\r\n\t\t\t<br><br>\r\n\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col offset-m8 m4\">\r\n\t\t\t\t\t<div class=\"input-field col s12\">\r\n\t\t\t\t\t\t<select v-on:change=\"onchangeSortBy\">\r\n\t\t\t\t\t\t\t<option value=\"newestToOldest\">Newest to oldest</option>\r\n\t\t\t\t\t\t\t<option value=\"oldestToNewest\">Oldest to newest</option>\r\n\t\t\t\t\t\t\t<option value=\"priceDescending\">Price (descending)</option>\r\n\t\t\t\t\t\t\t<option value=\"priceAscending\">Price (ascending)</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t<label>Sort by</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"row\" v-if=\"isLoading\">\r\n\t\t\t\t<div class=\"col offset-m6 m4\">\r\n\t\t\t\t\t<div class=\"preloader-wrapper big active\">\r\n\t\t\t\t\t\t<div class=\"spinner-layer spinner-blue-only\">\r\n\t\t\t\t\t\t\t<div class=\"circle-clipper left\">\r\n\t\t\t\t\t\t\t\t<div class=\"circle\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div class=\"gap-patch\">\r\n\t\t\t\t\t\t\t\t<div class=\"circle\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div class=\"circle-clipper right\">\r\n\t\t\t\t\t\t\t\t<div class=\"circle\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col m1\">\r\n\t\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t\t<div class=\"card-body\" style=\"padding-top: 10px; padding-bottom: 10px; padding-left: 20px;\">\r\n\t\t\t\t\t\t\t<p style=\"cursor: pointer;\" v-on:click=\"onclickCategory\">All</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"card\" v-for=\"category in categories\">\r\n\t\t\t\t\t\t<div class=\"card-body\" style=\"padding-top: 10px; padding-bottom: 10px; padding-left: 20px;\">\r\n\t\t\t\t\t\t\t<p v-text=\"category\" style=\"cursor: pointer;\" v-on:click=\"onclickCategory\"></p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"col m11\">\r\n\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t<div class=\"col m4\" v-for=\"(product) in products\" v-bind:key=\"product._id\">\r\n\t\t\t\t\t\t\t<div class=\"card blue-grey darken-1\">\r\n\t\t\t\t\t\t\t\t<div class=\"card-content white-text\">\r\n\t\t\t\t\t\t\t\t\t<img v-if=\"product.images.length > 0\" v-bind:src=\"this.$apiURL + '/' + product.images[0]\" style=\"width: 100%; height: 300px; object-fit: contain;\" />\r\n\t\t\t\t\t\t\t\t\t<span class=\"card-title\" v-text=\"product.name\"></span>\r\n\t\t\t\t\t\t\t\t\t<p>$<span v-text=\"product.price\"></span></p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"card-action\">\r\n\t\t\t\t\t\t\t\t\t<router-link v-bind:to=\"'/product/' + product._id\">More detail</router-link>\r\n\r\n\t\t\t\t\t\t\t\t\t<span style=\"float: right; color: white;\">In stock: <span v-text=\"product.itemsInStock || 0\"></span></span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col offset-m6 m4\">\r\n\t\t\t\t\t<button type=\"button\" class=\"waves-effect waves-light btn\" v-on:click=\"loadMore\" ref=\"btnLoadMore\">Load more</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport axios from \"axios\"\r\n    import swal from \"sweetalert2\"\r\n    import store from \"../vuex/store\"\r\n\r\n\texport default {\r\n\t\tdata() {\r\n            return {\r\n                page: 1,\r\n                products: [],\r\n                sortBy: \"\",\r\n                categories: [],\r\n                category: \"\",\r\n                isLoading: false\r\n            }\r\n        },\r\n\r\n        computed: {\r\n        \tsearch: function () {\r\n        \t\treturn store.getters.getSearch\r\n        \t}\r\n        },\r\n\r\n        methods: {\r\n        \tonchangeSortBy: function () {\r\n        \t\tthis.page = 1\r\n        \t\tthis.sortBy = event.target.value\r\n        \t\tthis.getData()\r\n        \t},\r\n\r\n        \tonclickCategory: function () {\r\n        \t\tthis.page = 1\r\n        \t\tthis.category = event.target.innerHTML\r\n        \t\tthis.getData()\r\n        \t},\r\n\r\n        \tloadMore: function () {\r\n        \t\tthis.$refs.btnLoadMore.setAttribute(\"disabled\", \"disabled\")\r\n\r\n        \t\tthis.page++\r\n        \t\tthis.getData()\r\n        \t},\r\n\r\n        \tgetConfigurations: async function () {\r\n        \t\tconst response = await axios.post(\r\n                    this.$apiURL + \"/getConfigurations\",\r\n                    null\r\n                )\r\n\r\n                if (response.data.status == \"success\") {\r\n                    const configurations = response.data.configurations\r\n                    this.categories = configurations.categories || []\r\n                }\r\n        \t},\r\n\r\n            getData: async function () {\r\n            \tthis.isLoading = true\r\n\r\n                const formData = new FormData()\r\n                formData.append(\"page\", this.page)\r\n                formData.append(\"sortBy\", this.sortBy)\r\n                formData.append(\"category\", this.category)\r\n                formData.append(\"search\", this.search)\r\n\r\n                const response = await axios.post(\r\n                    this.$apiURL + \"/products/fetch\",\r\n                    formData\r\n                )\r\n\r\n                this.isLoading = false\r\n                this.$refs.btnLoadMore.removeAttribute(\"disabled\")\r\n\r\n                if (response.data.status == \"success\") {\r\n                \tthis.products = response.data.products\r\n                } else {\r\n                    swal.fire(\"Error\", response.data.message, \"error\")\r\n                }\r\n            }\r\n        },\r\n\r\n        mounted: function () {\r\n        \tthis.getConfigurations()\r\n            this.getData()\r\n\r\n        \tvar elems = document.querySelectorAll('select')\r\n\t\t    var instances = M.FormSelect.init(elems, {})\r\n        },\r\n\r\n        watch: {\r\n        \tsearch: function (to, from) {\r\n        \t\tthis.getData()\r\n        \t}\r\n        }\r\n\t}\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
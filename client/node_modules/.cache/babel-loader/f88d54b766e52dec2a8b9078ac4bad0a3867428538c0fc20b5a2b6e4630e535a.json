{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport store from \"../vuex/store\";\nexport default {\n  data() {\n    return {\n      _id: this.$route.params._id,\n      product: null,\n      isInCart: false\n    };\n  },\n  methods: {\n    getDateInFormat: function (timestamp) {\n      let date = new Date(timestamp);\n      date = date.getDate() + \" \" + store.getters.getMonths[date.getMonth()] + \", \" + date.getFullYear();\n      return date;\n    },\n    removeFromCart: function () {\n      const cookieParts = document.cookie.split(\"; \");\n      for (let a = 0; a < cookieParts.length; a++) {\n        const keyValue = cookieParts[a].split(\"=\");\n        if (keyValue[0] == \"products\") {\n          const products = JSON.parse(keyValue[1]);\n          for (let b = 0; b < products.length; b++) {\n            if (products[b]._id == this._id) {\n              products.splice(b, 1);\n              document.cookie = \"products=\" + JSON.stringify(products);\n              swal.fire(\"Remove from cart\", \"Product has been removed from cart\", \"success\");\n              this.isInCart = false;\n              store.commit(\"setCartCounter\", products.length);\n              return;\n            }\n          }\n        }\n      }\n    },\n    addToCart: function () {\n      if (this.product == null) {\n        return;\n      }\n      let products = [];\n      const cookieParts = document.cookie.split(\"; \");\n      for (let a = 0; a < cookieParts.length; a++) {\n        const keyValue = cookieParts[a].split(\"=\");\n        if (keyValue[0] == \"products\") {\n          products = JSON.parse(keyValue[1]);\n          break;\n        }\n      }\n      products.push({\n        _id: this._id,\n        name: this.product.name,\n        price: this.product.price,\n        units: 1\n      });\n      document.cookie = \"products=\" + JSON.stringify(products);\n\n      // swal.fire(\"Add to cart\", \"Product has been added to cart\", \"success\")\n      this.isInCart = true;\n      store.commit(\"setCartCounter\", products.length);\n    },\n    getData: async function () {\n      const formData = new FormData();\n      formData.append(\"_id\", this._id);\n      const response = await axios.post(this.$apiURL + \"/products/fetchSingle\", formData);\n      if (response.data.status == \"success\") {\n        // console.log(response.data.product)\n        this.product = response.data.product;\n        setTimeout(function () {\n          var elems = document.querySelectorAll('.carousel');\n          var instances = M.Carousel.init(elems, {});\n        }, 500);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    }\n  },\n  mounted: function () {\n    this.getData();\n    const cookieParts = document.cookie.split(\"; \");\n    for (let a = 0; a < cookieParts.length; a++) {\n      const keyValue = cookieParts[a].split(\"=\");\n      if (keyValue[0] == \"products\") {\n        const products = JSON.parse(keyValue[1]);\n        for (let b = 0; b < products.length; b++) {\n          if (products[b]._id == this._id) {\n            this.isInCart = true;\n            return;\n          }\n        }\n      }\n    }\n    setTimeout(function () {\n      var el = document.querySelectorAll('.tabs');\n      var instance = M.Tabs.init(el, {});\n    }, 1000);\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","swal","store","data","_id","$route","params","product","isInCart","methods","getDateInFormat","timestamp","date","Date","getDate","getters","getMonths","getMonth","getFullYear","removeFromCart","cookieParts","document","cookie","split","a","length","keyValue","products","JSON","parse","b","splice","stringify","fire","commit","addToCart","push","name","price","units","getData","formData","FormData","append","response","post","$apiURL","status","setTimeout","elems","querySelectorAll","instances","M","Carousel","init","message","mounted","el","instance","Tabs"],"sourceRoot":"","sources":["/home/aka/Documents/react-nativ/ecommerce-mevn-stack/client/src/components/ProductDetail.vue"],"sourcesContent":["<template>\r\n\t<div class=\"section no-pad-bot\" id=\"index-banner\" v-if=\"product != null\">\r\n\t\t<div class=\"container-fluid\">\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col m6\">\r\n\t\t\t\t\t<div class=\"carousel\">\r\n\t\t\t\t\t\t<a class=\"carousel-item\" href=\"#one!\" v-for=\"(image, index) in product.images\">\r\n\t\t\t\t\t\t\t<img v-bind:src=\"this.$apiURL + '/' + image\" style=\"width: 100%;\" />\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"col m6\">\r\n\t\t\t\t\t<h2 v-text=\"product.name + ' (Rp' + product.price + ')'\"></h2>\r\n\t\t\t\t\t<p v-text=\"product.description\"></p>\r\n\t\t\t\t\t<p>In stock: <span v-text=\"product.itemsInStock || 0\"></span></p>\r\n\r\n\t\t\t\t\t<button v-if=\"isInCart\" type=\"button\" class=\"waves-effect waves-light btn\" v-on:click=\"removeFromCart\">Remove from cart</button>\r\n\t\t\t\t\t<button v-else type=\"button\" class=\"waves-effect waves-light btn\" v-on:click=\"addToCart\">Add to cart</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n\timport axios from \"axios\"\r\n\timport swal from \"sweetalert2\"\r\n\timport store from \"../vuex/store\"\r\n\r\n\texport default {\r\n\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t_id: this.$route.params._id,\r\n\t\t\t\tproduct: null,\r\n\t\t\t\tisInCart: false\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tgetDateInFormat: function (timestamp) {\r\n\t\t\t\tlet date = new Date(timestamp)\r\n\t\t\t\tdate = date.getDate() + \" \" + store.getters.getMonths[date.getMonth()] + \", \" + date.getFullYear()\r\n\t\t\t\treturn date\r\n\t\t\t},\r\n\r\n\t\t\tremoveFromCart: function () {\r\n\t\t\t\tconst cookieParts = document.cookie.split(\"; \")\r\n\t\t\t\tfor (let a = 0; a < cookieParts.length; a++) {\r\n\t\t\t\t\tconst keyValue = cookieParts[a].split(\"=\")\r\n\t\t\t\t\tif (keyValue[0] == \"products\") {\r\n\t\t\t\t\t\tconst products = JSON.parse(keyValue[1])\r\n\t\t\t\t\t\tfor (let b = 0; b < products.length; b++) {\r\n\t\t\t\t\t\t\tif (products[b]._id == this._id) {\r\n\t\t\t\t\t\t\t\tproducts.splice(b, 1)\r\n\t\t\t\t\t\t\t\tdocument.cookie = \"products=\" + JSON.stringify(products)\r\n\r\n\t\t\t\t\t\t\t\tswal.fire(\"Remove from cart\", \"Product has been removed from cart\", \"success\")\r\n\t\t\t\t\t\t\t\tthis.isInCart = false\r\n\t\t\t\t\t\t\t\tstore.commit(\"setCartCounter\", products.length)\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\taddToCart: function () {\r\n\t\t\t\tif (this.product == null) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet products = []\r\n\t\t\t\tconst cookieParts = document.cookie.split(\"; \")\r\n\t\t\t\tfor (let a = 0; a < cookieParts.length; a++) {\r\n\t\t\t\t\tconst keyValue = cookieParts[a].split(\"=\")\r\n\t\t\t\t\tif (keyValue[0] == \"products\") {\r\n\t\t\t\t\t\tproducts = JSON.parse(keyValue[1])\r\n\t\t\t\t\t\tbreak \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tproducts.push({\r\n\t\t\t\t\t_id: this._id,\r\n\t\t\t\t\tname: this.product.name,\r\n\t\t\t\t\tprice: this.product.price,\r\n\t\t\t\t\tunits: 1\r\n\t\t\t\t})\r\n\t\t\t\tdocument.cookie = \"products=\" + JSON.stringify(products)\r\n\r\n\t\t\t\t// swal.fire(\"Add to cart\", \"Product has been added to cart\", \"success\")\r\n\t\t\t\tthis.isInCart = true\r\n\t\t\t\tstore.commit(\"setCartCounter\", products.length)\r\n\t\t\t},\r\n\r\n            getData: async function () {\r\n                const formData = new FormData()\r\n                formData.append(\"_id\", this._id)\r\n\r\n                const response = await axios.post(\r\n                    this.$apiURL + \"/products/fetchSingle\",\r\n                    formData\r\n                )\r\n\r\n                if (response.data.status == \"success\") {\r\n                    // console.log(response.data.product)\r\n                    this.product = response.data.product\r\n\r\n                    setTimeout(function () {\r\n                    \tvar elems = document.querySelectorAll('.carousel')\r\n\t                    var instances = M.Carousel.init(elems, {})\r\n\t                }, 500)\r\n                } else {\r\n                    swal.fire(\"Error\", response.data.message, \"error\")\r\n                }\r\n            }\r\n        },\r\n\r\n        mounted: function () {\r\n            this.getData()\r\n\r\n            const cookieParts = document.cookie.split(\"; \")\r\n\t\t\tfor (let a = 0; a < cookieParts.length; a++) {\r\n\t\t\t\tconst keyValue = cookieParts[a].split(\"=\")\r\n\t\t\t\tif (keyValue[0] == \"products\") {\r\n\t\t\t\t\tconst products = JSON.parse(keyValue[1])\r\n\t\t\t\t\tfor (let b = 0; b < products.length; b++) {\r\n\t\t\t\t\t\tif (products[b]._id == this._id) {\r\n\t\t\t\t\t\t\tthis.isInCart = true\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar el = document.querySelectorAll('.tabs')\r\n\t\t\t\tvar instance = M.Tabs.init(el, {})\r\n\t\t\t}, 1000)\r\n        }\r\n\t}\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
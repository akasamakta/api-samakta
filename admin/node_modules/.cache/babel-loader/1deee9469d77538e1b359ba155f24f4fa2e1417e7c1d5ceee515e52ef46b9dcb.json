{"ast":null,"code":"import axios from \"axios\";\nimport swal from \"sweetalert2\";\nexport default {\n  data() {\n    return {\n      page: 1,\n      products: []\n    };\n  },\n  methods: {\n    deleteProduct: async function () {\n      const self = this;\n      const form = event.target;\n      const formData = new FormData(form);\n      swal.fire({\n        title: 'Are you sure?',\n        text: \"This product will be deleted.\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(async function (result) {\n        if (result.isConfirmed) {\n          const response = await axios.post(self.$apiURL + \"/admin/products/destroy\", formData, {\n            headers: self.$headers\n          });\n          if (response.data.status == \"success\") {\n            for (let a = 0; a < self.products.length; a++) {\n              if (self.products[a]._id == form._id.value) {\n                self.products.splice(a, 1);\n                break;\n              }\n            }\n            swal.fire(\"Success\", response.data.message, \"success\");\n          } else {\n            swal.fire(\"Error\", response.data.message, \"error\");\n          }\n        }\n      });\n    },\n    loadMore: async function () {\n      this.$refs.btnLoadMore.setAttribute(\"disabled\", \"disabled\");\n      this.page++;\n      this.getData();\n    },\n    getData: async function () {\n      const formData = new FormData();\n      formData.append(\"page\", this.page);\n      const response = await axios.post(this.$apiURL + \"/admin/products/fetch\", formData, {\n        headers: this.$headers\n      });\n      this.$refs.btnLoadMore.removeAttribute(\"disabled\");\n      if (response.data.status == \"success\") {\n        if (response.data.products.length > 0) {\n          this.products = response.data.products;\n        }\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    }\n  },\n  mounted: function () {\n    this.getData();\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","swal","data","page","products","methods","deleteProduct","self","form","event","target","formData","FormData","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","response","post","$apiURL","headers","$headers","status","a","length","_id","value","splice","message","loadMore","$refs","btnLoadMore","setAttribute","getData","append","removeAttribute","mounted"],"sourceRoot":"","sources":["/home/aka/Documents/react-nativ/ecommerce-mevn-stack/admin/src/components/AllProducts.vue"],"sourcesContent":["<template>\r\n    <!-- End Navbar -->\r\n    <div class=\"container-fluid py-4\">\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        <h4 class=\"font-weight-bolder\">All products</h4>\r\n                    </div>\r\n\r\n                    <div class=\"card-body\">\r\n                        <div class=\"table-responsive p-0\">\r\n                            <table class=\"table align-items-center justify-content-center mb-0\" id=\"products-table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th class=\"text-uppercase text-secondary opacity-7\">Name</th>\r\n                                        <th class=\"text-uppercase text-secondary opacity-7\">Price</th>\r\n                                        <th class=\"text-uppercase text-secondary opacity-7\">In stock</th>\r\n                                        <th class=\"text-uppercase text-secondary opacity-7\">Actions</th>\r\n                                    </tr>\r\n                                </thead>\r\n\r\n                                <tbody>\r\n                                    <tr v-for=\"(product) in products\" v-bind:key=\"product._id.toString()\">\r\n                                        <td>\r\n                                            <span v-text=\"product.name\"></span>\r\n                                        </td>\r\n\r\n                                        <td>\r\n                                            Rp<span v-text=\"product.price\"></span>\r\n                                        </td>\r\n\r\n                                        <td>\r\n                                            <span v-text=\"product.itemsInStock || 0\"></span>\r\n                                        </td>\r\n\r\n                                        <td>\r\n                                            <router-link v-bind:to=\"'/product/edit/' + product._id\" class=\"text-secondary\">\r\n                                                Edit\r\n                                            </router-link>\r\n\r\n                                            <form v-on:submit.prevent=\"deleteProduct\">\r\n                                                <input type=\"hidden\" name=\"_id\" v-bind:value=\"product._id\" required />\r\n\r\n                                                <input type=\"submit\" name=\"submit\" class=\"btn btn-xs bg-gradient-primary\" value=\"Delete\" />\r\n                                            </form>\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"card-footer\">\r\n                        <button type=\"button\" v-on:click=\"loadMore\" class=\"btn btn-lg bg-gradient-primary btn-lg w-100 mt-4 mb-0\" ref=\"btnLoadMore\">Load more</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import axios from \"axios\"\r\n    import swal from \"sweetalert2\"\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                page: 1,\r\n                products: []\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            deleteProduct: async function () {\r\n                const self = this\r\n                const form = event.target\r\n                const formData = new FormData(form)\r\n\r\n                swal.fire({\r\n                    title: 'Are you sure?',\r\n                    text: \"This product will be deleted.\",\r\n                    icon: 'warning',\r\n                    showCancelButton: true,\r\n                    confirmButtonColor: '#3085d6',\r\n                    cancelButtonColor: '#d33',\r\n                    confirmButtonText: 'Yes, delete it!'\r\n                }).then(async function (result) {\r\n                    if (result.isConfirmed) {\r\n                        const response = await axios.post(\r\n                            self.$apiURL + \"/admin/products/destroy\",\r\n                            formData,\r\n                            {\r\n                                headers: self.$headers\r\n                            }\r\n                        )\r\n\r\n                        if (response.data.status == \"success\") {\r\n                            for (let a = 0; a < self.products.length; a++) {\r\n                                if (self.products[a]._id == form._id.value) {\r\n                                    self.products.splice(a, 1)\r\n                                    break\r\n                                }\r\n                            }\r\n\r\n                            swal.fire(\"Success\", response.data.message, \"success\")\r\n                        } else {\r\n                            swal.fire(\"Error\", response.data.message, \"error\")\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n\r\n            loadMore: async function () {\r\n                this.$refs.btnLoadMore.setAttribute(\"disabled\", \"disabled\")\r\n\r\n                this.page++\r\n                this.getData()\r\n            },\r\n\r\n            getData: async function () {\r\n                const formData = new FormData()\r\n                formData.append(\"page\", this.page)\r\n\r\n                const response = await axios.post(\r\n                    this.$apiURL + \"/admin/products/fetch\",\r\n                    formData,\r\n                    {\r\n                        headers: this.$headers\r\n                    }\r\n                )\r\n\r\n                this.$refs.btnLoadMore.removeAttribute(\"disabled\")\r\n\r\n                if (response.data.status == \"success\") {\r\n                    if (response.data.products.length > 0) {\r\n                        this.products = response.data.products\r\n                    }\r\n                } else {\r\n                    swal.fire(\"Error\", response.data.message, \"error\")\r\n                }\r\n            }\r\n        },\r\n\r\n        mounted: function () {\r\n            this.getData()\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    #products-table th,\r\n    #products-table td {\r\n        padding-left: 0px !important;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}